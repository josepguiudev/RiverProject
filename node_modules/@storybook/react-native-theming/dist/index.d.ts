import * as RN from 'react-native';
import { TextStyle, ImageSourcePropType, ImageProps } from 'react-native';
import { Theme } from './theming.js';
export { ThemeProvider, useTheme, withTheme } from './theming.js';
import { ReactElement } from 'react';

// Definitions by: Pat Sissons <https://github.com/patsissons>
// TypeScript Version: 3.4



type ReactNativeStyle = RN.ViewStyle | RN.TextStyle | RN.ImageStyle

type ReactNativeStyleType<Props> = Props extends {
  style?: RN.StyleProp<infer StyleType>
}
  ? StyleType extends ReactNativeStyle
    ? StyleType
    : ReactNativeStyle
  : ReactNativeStyle

type InterpolationPrimitive<
  StyleType extends ReactNativeStyle = ReactNativeStyle
> =
  | null
  | undefined
  | boolean
  | number
  | string
  | ObjectInterpolation<StyleType>

type ObjectInterpolation<
  StyleType extends ReactNativeStyle = ReactNativeStyle
> = StyleType

interface ArrayInterpolation<
  MergedProps,
  StyleType extends ReactNativeStyle = ReactNativeStyle
> extends Array<Interpolation<MergedProps, StyleType>> {}

interface FunctionInterpolation<
  MergedProps,
  StyleType extends ReactNativeStyle = ReactNativeStyle
> {
  (mergedProps: MergedProps): Interpolation<MergedProps, StyleType>
}

type Interpolation<
  MergedProps = unknown,
  StyleType extends ReactNativeStyle = ReactNativeStyle
> =
  | InterpolationPrimitive<StyleType>
  | ArrayInterpolation<MergedProps, StyleType>
  | FunctionInterpolation<MergedProps, StyleType>

/** Same as StyledOptions but shouldForwardProp must be a type guard */
interface FilteringStyledOptions<
  Props = Record<string, any>,
  ForwardedProps extends keyof Props & string = keyof Props & string
> {
  shouldForwardProp?: (propName: string) => propName is ForwardedProps
}

interface StyledOptions<Props = Record<string, any>> {
  shouldForwardProp?: (propName: string) => boolean
}

/**
 * @typeparam ComponentProps  Props which will be included when withComponent is called
 * @typeparam SpecificComponentProps  Props which will *not* be included when withComponent is called
 */
interface StyledComponent<
  ComponentProps extends {},
  SpecificComponentProps extends {} = {},
  JSXProps extends {} = {}
> extends React.FC<ComponentProps & SpecificComponentProps & JSXProps> {
  withComponent<C extends React.ComponentClass<React.ComponentProps<C>>>(
    component: C
  ): StyledComponent<
    ComponentProps & React.ComponentProps<C>,
    {},
    { ref?: React.Ref<InstanceType<C>> }
  >
  withComponent<C extends React.ComponentType<React.ComponentProps<C>>>(
    component: C
  ): StyledComponent<ComponentProps & React.ComponentProps<C>>
}

/**
 * @typeparam ComponentProps  Props which will be included when withComponent is called
 * @typeparam SpecificComponentProps  Props which will *not* be included when withComponent is called
 */
interface CreateStyledComponent<
  ComponentProps extends {},
  SpecificComponentProps extends {} = {},
  JSXProps extends {} = {},
  StyleType extends ReactNativeStyle = ReactNativeStyle
> {
  /**
   * @typeparam AdditionalProps  Additional props to add to your styled component
   */
  <AdditionalProps extends {} = {}>(
    ...styles: ArrayInterpolation<
      ComponentProps &
        SpecificComponentProps &
        AdditionalProps & { theme: Theme },
      StyleType
    >
  ): StyledComponent<
    ComponentProps & AdditionalProps,
    SpecificComponentProps,
    JSXProps
  >
  /**
   * @typeparam AdditionalProps  Additional props to add to your styled component
   */
  <AdditionalProps extends {} = {}>(
    template: TemplateStringsArray,
    ...styles: ArrayInterpolation<
      ComponentProps &
        SpecificComponentProps &
        AdditionalProps & { theme: Theme },
      StyleType
    >
  ): StyledComponent<
    ComponentProps & AdditionalProps,
    SpecificComponentProps,
    JSXProps
  >
}

/**
 * @desc
 * This function accepts a React component.
 *
 * @example styled(MyComponent)({ width: 100 })
 * @example styled(MyComponent)(myComponentProps => ({ width: myComponentProps.width })
 * @example styled(View)({ width: 100 })
 * @example styled(View)<Props>(props => ({ width: props.width })
 */
interface CreateStyled$1 {
  <
    C extends React.ComponentClass<React.ComponentProps<C>>,
    ForwardedProps extends keyof React.ComponentProps<C> &
      string = keyof React.ComponentProps<C> & string
  >(
    component: C,
    options: FilteringStyledOptions<React.ComponentProps<C>, ForwardedProps>
  ): CreateStyledComponent<
    Pick<React.ComponentProps<C>, ForwardedProps> & {
      theme?: Theme
      as?: React.ElementType
    },
    {},
    { ref?: React.Ref<InstanceType<C>> },
    ReactNativeStyleType<React.ComponentProps<C>>
  >

  <C extends React.ComponentClass<React.ComponentProps<C>>>(
    component: C,
    options?: StyledOptions<React.ComponentProps<C>>
  ): CreateStyledComponent<
    React.ComponentProps<C> & {
      theme?: Theme
      as?: React.ElementType
    },
    {},
    { ref?: React.Ref<InstanceType<C>> },
    ReactNativeStyleType<React.ComponentProps<C>>
  >

  <
    C extends React.ComponentType<React.ComponentProps<C>>,
    ForwardedProps extends keyof React.ComponentProps<C> &
      string = keyof React.ComponentProps<C> & string
  >(
    component: C,
    options: FilteringStyledOptions<React.ComponentProps<C>, ForwardedProps>
  ): CreateStyledComponent<
    Pick<React.ComponentProps<C>, ForwardedProps> & {
      theme?: Theme
      as?: React.ElementType
    },
    {},
    {},
    ReactNativeStyleType<React.ComponentProps<C>>
  >

  <C extends React.ComponentType<React.ComponentProps<C>>>(
    component: C,
    options?: StyledOptions<React.ComponentProps<C>>
  ): CreateStyledComponent<
    React.ComponentProps<C> & { theme?: Theme; as?: React.ElementType },
    {},
    {},
    ReactNativeStyleType<React.ComponentProps<C>>
  >
}

// Definitions by: Pat Sissons <https://github.com/patsissons>
// TypeScript Version: 3.4



type ReactNative = typeof RN

// those 2 are just copies of the `BaseCreateStyled` with supplied `C` type argument
type HostClassComponent<C extends React.ComponentClass<any>> =
  CreateStyledComponent<
    React.ComponentProps<C> & { theme?: Theme; as?: React.ElementType },
    {},
    { ref?: React.Ref<InstanceType<C>> },
    ReactNativeStyleType<React.ComponentProps<C>>
  >
type HostFunctionComponent<C extends React.FunctionComponent<any>> =
  CreateStyledComponent<
    React.ComponentProps<C> & { theme?: Theme; as?: React.ElementType },
    {},
    {},
    ReactNativeStyleType<React.ComponentProps<C>>
  >

interface StyledComponents {
  ActivityIndicator: HostClassComponent<ReactNative['ActivityIndicator']>
  Button: HostClassComponent<ReactNative['Button']>
  DatePickerIOS: HostClassComponent<ReactNative['DatePickerIOS']>
  DrawerLayoutAndroid: HostClassComponent<ReactNative['DrawerLayoutAndroid']>
  FlatList: HostClassComponent<ReactNative['FlatList']>
  Image: HostClassComponent<ReactNative['Image']>
  ImageBackground: HostClassComponent<ReactNative['ImageBackground']>
  KeyboardAvoidingView: HostClassComponent<ReactNative['KeyboardAvoidingView']>
  ListView: HostClassComponent<ReactNative['ListView']>
  Modal: HostClassComponent<ReactNative['Modal']>
  NavigatorIOS: HostClassComponent<ReactNative['NavigatorIOS']>
  Picker: HostClassComponent<ReactNative['Picker']>
  PickerIOS: HostClassComponent<ReactNative['PickerIOS']>
  Pressable: HostFunctionComponent<ReactNative['Pressable']>
  ProgressBarAndroid: HostClassComponent<ReactNative['ProgressBarAndroid']>
  ProgressViewIOS: HostClassComponent<ReactNative['ProgressViewIOS']>
  RecyclerViewBackedScrollView: HostClassComponent<
    ReactNative['RecyclerViewBackedScrollView']
  >
  RefreshControl: HostClassComponent<ReactNative['RefreshControl']>
  SafeAreaView: HostClassComponent<ReactNative['SafeAreaView']>
  ScrollView: HostClassComponent<ReactNative['ScrollView']>
  SectionList: HostClassComponent<ReactNative['SectionList']>
  SegmentedControlIOS: HostClassComponent<ReactNative['SegmentedControlIOS']>
  Slider: HostClassComponent<ReactNative['Slider']>
  SnapshotViewIOS: HostClassComponent<ReactNative['SnapshotViewIOS']>
  StatusBar: HostClassComponent<ReactNative['StatusBar']>
  SwipeableListView: HostClassComponent<ReactNative['SwipeableListView']>
  Switch: HostClassComponent<ReactNative['Switch']>
  SwitchIOS: HostClassComponent<ReactNative['SwitchIOS']>
  TabBarIOS: HostClassComponent<ReactNative['TabBarIOS']>
  Text: HostClassComponent<ReactNative['Text']>
  TextInput: HostClassComponent<ReactNative['TextInput']>
  ToolbarAndroid: HostClassComponent<ReactNative['ToolbarAndroid']>
  TouchableHighlight: HostClassComponent<ReactNative['TouchableHighlight']>
  TouchableNativeFeedback: HostClassComponent<
    ReactNative['TouchableNativeFeedback']
  >
  TouchableOpacity: HostClassComponent<ReactNative['TouchableOpacity']>
  TouchableWithoutFeedback: HostClassComponent<
    ReactNative['TouchableWithoutFeedback']
  >
  View: HostClassComponent<ReactNative['View']>
  ViewPagerAndroid: HostClassComponent<ReactNative['ViewPagerAndroid']>
}

interface CreateStyled extends CreateStyled$1, StyledComponents {}

declare const styled: CreateStyled

declare const color: {
    primary: string;
    secondary: string;
    secondaryLighter: string;
    tertiary: string;
    ancillary: string;
    orange: string;
    gold: string;
    green: string;
    seafoam: string;
    purple: string;
    ultraviolet: string;
    lightest: string;
    lighter: string;
    light: string;
    mediumlight: string;
    medium: string;
    mediumdark: string;
    dark: string;
    darker: string;
    darkest: string;
    border: string;
    positive: string;
    negative: string;
    warning: string;
    critical: string;
    defaultText: string;
    inverseText: string;
    positiveText: string;
    negativeText: string;
    warningText: string;
};
declare const background: {
    app: string;
    bar: string;
    content: string;
    preview: string;
    gridCellSize: number;
    hoverable: string;
    positive: string;
    negative: string;
    warning: string;
    critical: string;
};
declare const typography: {
    weight: {
        regular: TextStyle["fontWeight"];
        bold: TextStyle["fontWeight"];
    };
    size: {
        s1: number;
        s2: number;
        s3: number;
        m1: number;
        m2: number;
        m3: number;
        l1: number;
        l2: number;
        l3: number;
        code: number;
    };
};
type Color = typeof color;
type Background = typeof background;
type Typography = typeof typography;
interface Brand {
    title?: string | undefined;
    url?: string | null | undefined;
    image?: ImageSourcePropType | ReactElement | null | undefined;
    resizeMode?: ImageProps['resizeMode'] | null | undefined;
    target?: string | null | undefined;
}
interface StorybookThemeWeb {
    base: 'light' | 'dark';
    color: Color;
    background: Background;
    typography: Typography;
    textMutedColor: string;
    input: {
        border: string;
        background: string;
        color: string;
        borderRadius: number;
        paddingHorizontal: number;
        paddingVertical: number;
    };
    button: {
        background: string;
        border: string;
    };
    boolean: {
        background: string;
        selectedBackground: string;
    };
    layoutMargin: number;
    appBorderColor: string;
    appBorderRadius: number;
    barTextColor: string;
    barHoverColor: string;
    barSelectedColor: string;
    barBg: string;
    brand?: Brand;
}

type StorybookTheme = StorybookThemeWeb;
declare const theme: StorybookThemeWeb;
declare const darkTheme: StorybookThemeWeb;

export { type StorybookTheme, type StyledComponent, darkTheme, styled, theme };

export interface Theme extends StorybookTheme {}